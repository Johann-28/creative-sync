<div class="app-container">
    <!-- Mensaje superior para modo selecci√≥n -->

    <div class="selection-top-message" [class.active]="selectionMode">
        üéØ Selecciona una secci√≥n para analizarla con AI
        <button class="btn-cancel-selection" (click)="exitSelectionMode()">‚úï</button>
    </div>
    <!-- Header -->
    <header class="header">
        <div class="logo">üé® CreativeSync</div>
        <div class="user-profile">
            <span>Maria Rodriguez</span>
            <div class="avatar">MR</div>
        </div>
    </header>

        <!-- Navigation Tabs -->
        <div class="main-content">
            <div class="nav-tabs">
                <button class="nav-tab" [class.active]="activeTab === 0" (click)="showScreen(1)">üìä Dashboard</button>
                <button class="nav-tab" [class.active]="activeTab === 1" (click)="showScreen(2)">üéØ AI Wizard</button>
                <button class="nav-tab" [class.active]="activeTab === 2" (click)="showScreen(3)">üß† Network</button>
                <button class="nav-tab" [class.active]="activeTab === 3" (click)="showScreen(4)">üìÑ Brief</button>
            </div>

            <!-- Screen 1: Project Dashboard -->
            <div class="screen active" id="screen-1">
                <div class="dashboard-header">
                    <div>
                        <h1 class="dashboard-title">Creative Projects</h1>
                        <p class="dashboard-subtitle">Collaborative AI-powered creative brief generation</p>
                    </div>
                    <div class="header-actions">
                        <button class="btn-primary" (click)="startWizard()">üéØ AI Creative Brief</button>
                        <button class="btn-primary" (click)="createProject()">+ New Project</button>
                    </div>
                </div>

                <div class="projects-grid">
                    <div class="project-card" (click)="showScreen(2)">
                        <h3 class="project-title">EcoFit App Launch Campaign</h3>
                        <p class="project-description">Health & wellness app targeting professional women 25-40</p>
                        
                        <div class="stakeholder-progress">
                            <div class="stakeholder-status completed">
                                <span>‚úì</span> Marketing
                            </div>
                            <div class="stakeholder-status completed">
                                <span>‚úì</span> Product
                            </div>
                            <div class="stakeholder-status pending">
                                <span>‚è≥</span> Design
                            </div>
                            <div class="stakeholder-status not-started">
                                <span>‚óã</span> Sales
                            </div>
                        </div>
                        
                        <div class="progress-indicator">
                            <div class="progress-fill" style="width: 50%"></div>
                        </div>
                    </div>

                    <div class="project-card" (click)="showScreen(3)">
                        <h3 class="project-title">TechFlow CRM Product Launch</h3>
                        <p class="project-description">B2B SaaS solution for small business automation</p>
                        
                        <div class="stakeholder-progress">
                            <div class="stakeholder-status completed">
                                <span>‚úì</span> Marketing
                            </div>
                            <div class="stakeholder-status completed">
                                <span>‚úì</span> Product
                            </div>
                            <div class="stakeholder-status completed">
                                <span>‚úì</span> Design
                            </div>
                            <div class="stakeholder-status completed">
                                <span>‚úì</span> Sales
                            </div>
                        </div>
                        
                        <div class="progress-indicator">
                            <div class="progress-fill" style="width: 100%"></div>
                        </div>
                    </div>

                    <div class="project-card">
                        <h3 class="project-title">GreenTech Sustainability Campaign</h3>
                        <p class="project-description">Corporate sustainability messaging for B2B audience</p>
                        
                        <div class="stakeholder-progress">
                            <div class="stakeholder-status completed">
                                <span>‚úì</span> Marketing
                            </div>
                            <div class="stakeholder-status not-started">
                                <span>‚óã</span> Product
                            </div>
                            <div class="stakeholder-status not-started">
                                <span>‚óã</span> Design
                            </div>
                            <div class="stakeholder-status not-started">
                                <span>‚óã</span> Sales
                            </div>
                        </div>
                        
                        <div class="progress-indicator">
                            <div class="progress-fill" style="width: 25%"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Screen 2: Stakeholder Form (Legacy) -->
            <div class="screen" id="screen-legacy">
                <div class="form-container">
                    <div class="form-header">
                        <div class="stakeholder-badge">üë• Sales Team Input</div>
                        <h2>EcoFit App Launch Campaign</h2>
                        <p>Help us create the perfect creative brief by sharing your insights</p>
                    </div>

                    <div class="form-progress">
                        <div class="form-step completed">1</div>
                        <div class="form-step completed">2</div>
                        <div class="form-step active">3</div>
                        <div class="form-step">4</div>
                        <div class="form-step">5</div>
                    </div>

                    <div class="form-section">
                        <h3>üé® Visual Direction & Brand Personality</h3>
                        
                        <div class="form-group">
                            <label class="form-label">What visual style best represents the brand?</label>
                            <div class="ai-suggestion">
                                ü§ñ AI Suggestion: Based on health & wellness trends, minimalist and natural aesthetics perform 34% better
                            </div>
                            <select class="form-input">
                                <option>Minimalist & Clean</option>
                                <option>Bold & Energetic</option>
                                <option>Natural & Organic</option>
                                <option>Professional & Corporate</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Primary color palette preference</label>
                            <input type="text" class="form-input" placeholder="e.g., Green, earth tones, calming blues" value="Green & earth tones with accent of energetic orange">
                        </div>

                        <div class="form-group">
                            <label class="form-label">Key visual elements to include</label>
                            <textarea class="form-input" rows="3" placeholder="Describe important visual elements, imagery style, icons, etc.">Natural imagery, real people (not stock), plants/nature elements, clean typography, circular/organic shapes</textarea>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Content format priorities</label>
                            <div class="ai-suggestion">
                                ü§ñ AI Insight: Video content generates 45% more engagement for health apps in this demographic
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                                <label style="display: flex; align-items: center; gap: 8px;">
                                    <input type="checkbox" checked> Static Images
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px;">
                                    <input type="checkbox" checked> Video Content
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px;">
                                    <input type="checkbox"> Animated GIFs
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px;">
                                    <input type="checkbox"> Interactive Content
                                </label>
                            </div>
                        </div>
                    </div>

                    <div style="display: flex; justify-content: space-between; margin-top: 2rem;">
                        <button class="btn-primary" style="background: rgba(255,255,255,0.1);">‚Üê Previous</button>
                        <button class="btn-primary" (click)="showScreen(3)">Next Step ‚Üí</button>
                    </div>
                </div>
            </div>

            <!-- Screen 3: Network Visualization -->
            <div class="screen" id="screen-3">
                <h2 style="margin-bottom: 1rem;">üß† Collaborative Insights Network</h2>
                <p style="color: #888; margin-bottom: 2rem;">Interactive visualization of stakeholder inputs and AI-generated insights</p>
                
                <div class="network-container">
                    <div class="network-header">
                        <h3>TechFlow CRM Product Launch</h3>
                        <div class="network-legend">
                            <div class="legend-item">
                                <div class="legend-dot human"></div>
                                <span>Stakeholder Input</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-dot ai"></div>
                                <span>AI Insights</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-dot external"></div>
                                <span>External Data</span>
                            </div>
                        </div>
                    </div>

                    <!-- Pan Hint -->
                    <div class="pan-hint" id="panHint">
                        üñ±Ô∏è Drag to move ‚Ä¢ Scroll to zoom ‚Ä¢ Click nodes for details
                    </div>

                    <div class="team-legend">
                        <h4>Teams</h4>
                        <div class="team-item">
                            <div class="team-dot marketing"></div>
                            <span>Marketing</span>
                        </div>
                        <div class="team-item">
                            <div class="team-dot product"></div>
                            <span>Product</span>
                        </div>
                        <div class="team-item">
                            <div class="team-dot design"></div>
                            <span>Design</span>
                        </div>
                        <div class="team-item">
                            <div class="team-dot sales"></div>
                            <span>Sales</span>
                        </div>
                    </div>
                    
                    <div class="network-canvas" id="networkCanvas">
                        <!-- Zoom Controls -->
                        <div class="zoom-controls">
                            <div class="zoom-btn" (click)="zoomIn()" title="Zoom In">+</div>
                            <div class="zoom-btn" (click)="zoomOut()" title="Zoom Out">‚àí</div>
                            <div class="zoom-btn" (click)="resetZoom()" title="Reset">‚åÇ</div>
                        </div>
                        
                        <!-- SVG for connection lines -->
                        <svg class="network-svg" id="connectionSvg" viewBox="0 0 100 100" preserveAspectRatio="none">
                            <!-- Marketing to Target Audience -->
                            <line class="connection-line ai-connection" x1="25" y1="30" x2="50" y2="50" id="line-mkt-audience"></line>
                            <!-- Product to Target Audience -->
                            <line class="connection-line ai-connection" x1="35" y1="25" x2="50" y2="50" id="line-prd-audience"></line>
                            <!-- Sales to Target Audience -->
                            <line class="connection-line ai-connection" x1="65" y1="70" x2="50" y2="50" id="line-sal-audience"></line>
                            
                            <!-- Marketing to Tone of Voice -->
                            <line class="connection-line ai-connection" x1="25" y1="30" x2="35" y2="35" id="line-mkt-tone"></line>
                            <!-- Design to Tone of Voice -->
                            <line class="connection-line ai-connection" x1="75" y1="45" x2="35" y2="35" id="line-des-tone"></line>
                            
                            <!-- Product to Suggested Channels -->
                            <line class="connection-line ai-connection" x1="35" y1="25" x2="65" y2="65" id="line-prd-channels"></line>
                            <!-- Marketing to Suggested Channels -->
                            <line class="connection-line ai-connection" x1="25" y1="30" x2="65" y2="65" id="line-mkt-channels"></line>
                            <!-- External data to Suggested Channels -->
                            <line class="connection-line" x1="20" y1="75" x2="65" y2="65" id="line-ext-channels"></line>
                            
                            <!-- External data connections -->
                            <line class="connection-line" x1="15" y1="45" x2="50" y2="50" id="line-trends-audience"></line>
                            <line class="connection-line" x1="80" y1="20" x2="35" y2="35" id="line-competitor-tone"></line>
                            <line class="connection-line" x1="25" y1="80" x2="65" y2="65" id="line-benchmark-channels"></line>
                            
                            <!-- Additional connections for better visualization -->
                            <line class="connection-line" x1="75" y1="45" x2="25" y2="30" id="line-des-mkt"></line>
                            <line class="connection-line" x1="35" y1="25" x2="65" y2="70" id="line-prd-sal"></line>
                            <line class="connection-line" x1="15" y1="45" x2="80" y2="20" id="line-trends-competitor"></line>
                            <line class="connection-line" x1="25" y1="80" x2="20" y2="75" id="line-benchmark-channel"></line>
                        </svg>

                        <!-- Central AI Insight Nodes -->
                        <div class="network-node ai" style="top: 50%; left: 50%; transform: translate(-50%, -50%);" 
                             (mouseover)="onTargetAudienceHover($event)"
                             (mouseleave)="clearHighlights()">
                            üë•
                            <div class="node-label">Target Audience</div>
                        </div>
                        
                        <div class="network-node ai" style="top: 35%; left: 35%;" 
                             (mouseover)="onToneOfVoiceHover($event)"
                             (mouseleave)="clearHighlights()">
                            üó£Ô∏è
                            <div class="node-label">Tone of Voice</div>
                        </div>
                        
                        <div class="network-node ai" style="top: 65%; left: 65%;" 
                             (mouseover)="onChannelsHover($event)"
                             (mouseleave)="clearHighlights()">
                            üì±
                            <div class="node-label">Channels</div>
                        </div>

                        <!-- Human Input Nodes by Team -->
                        <div class="network-node human marketing" style="top: 30%; left: 25%;" 
                             (mouseover)="onMarketingTeamHover($event)"
                             (mouseleave)="clearHighlights()">
                            MKT
                            <div class="node-label">Marketing</div>
                        </div>
                        
                        <div class="network-node human product" style="top: 25%; left: 35%;" 
                             (mouseover)="onProductTeamHover($event)"
                             (mouseleave)="clearHighlights()">
                            PRD
                            <div class="node-label">Product</div>
                        </div>
                        
                        <div class="network-node human design" style="top: 45%; left: 75%;" 
                             (mouseover)="onDesignTeamHover($event)"
                             (mouseleave)="clearHighlights()">
                            DES
                            <div class="node-label">Design</div>
                        </div>
                        
                        <div class="network-node human sales" style="top: 70%; left: 65%;" 
                             (mouseover)="onSalesTeamHover($event)"
                             (mouseleave)="clearHighlights()">
                            SAL
                            <div class="node-label">Sales</div>
                        </div>

                        <!-- External Data Nodes -->
                        <div class="network-node external" style="top: 45%; left: 15%;" 
                             (mouseover)="onMarketTrendsHover($event)"
                             (mouseleave)="clearHighlights()">
                            üìà
                            <div class="node-label">Trends</div>
                        </div>
                        
                        <div class="network-node external" style="top: 20%; left: 80%;" 
                             (mouseover)="onCompetitorAnalysisHover($event)"
                             (mouseleave)="clearHighlights()">
                            üè¢
                            <div class="node-label">Competitors</div>
                        </div>
                        
                        <div class="network-node external" style="top: 80%; left: 25%;" 
                             (mouseover)="onIndustryBenchmarksHover($event)"
                             (mouseleave)="clearHighlights()">
                            üìä
                            <div class="node-label">Benchmarks</div>
                        </div>

                        <div class="network-node external" style="top: 75%; left: 20%;" 
                             (mouseover)="onChannelPerformanceHover($event)"
                             (mouseleave)="clearHighlights()">
                            üì°
                            <div class="node-label">Data</div>
                        </div>
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 1rem;">
                    <button class="btn-primary" (click)="showScreen(4)">Generate Final Brief ‚Üí</button>
                </div>
            </div>

            <!-- Screen 4: Final Creative Brief -->
            <div class="screen" id="screen-4">
                <div class="brief-container">
                    <div class="brief-header">
                        <div>
                            <h1 class="brief-title">Creative Brief</h1>
                            <p style="color: #888;">TechFlow CRM Product Launch</p>
                        </div>
                        <div class="export-options">
                            <a href="#" class="btn-export">üìÑ PDF</a>
                            <a href="#" class="btn-export">üìä Slides</a>
                            <a href="#" class="btn-export">üìã JSON</a>
                        </div>
                    </div>

                    
<div *ngFor="let section of briefSections; " 
             class="brief-section" 
             [class.section-selectable]="selectionMode"
             [class.section-selected]="selectedSectionIndex === section.id"
             (click)="selectionMode ? handleSectionClick($event, section.title, getBriefSectionContent(section.id), section.id) : null">
            
            <h3>{{ section.icon }} {{ section.title }}</h3>
            
            <!-- Text Content -->
            <div *ngIf="section.type === 'text'" class="brief-content" [innerHTML]="section.content"></div>
            
            <!-- Insights Grid -->
            <div *ngIf="section.type === 'insights'" class="insights-grid">
                <div *ngFor="let insight of section.insights;" class="insight-card">
                    <div class="insight-title">{{ insight.title }}</div>
                    <div>{{ insight.content }}</div>
                </div>
            </div>
            
            <!-- Metrics Content -->
            <div *ngIf="section.type === 'metrics'" class="brief-content" [innerHTML]="section.content"></div>
        </div>

                    <div style="text-align: center; margin-top: 2rem; padding-top: 2rem; border-top: 1px solid rgba(255,255,255,0.1);">
                        <p style="color: #888; font-size: 0.9rem;">
                            Generated by CreativeSync AI ‚Ä¢ All stakeholders completed ‚Ä¢ Ready for execution
                        </p>
                    </div>
                </div>
            </div>

            <!-- Screen 2: AI Creative Brief Wizard -->
            <div class="screen" id="screen-2">
                <div class="wizard-container">
                        <!-- Wizard Header -->
                        <div class="wizard-header">
                            <h1>üéØ AI Creative Brief Generator</h1>
                            <p>Answer a few questions and automatically generate a professional Creative Brief</p>
                            
                            <!-- Progress Indicator -->
                            <div class="wizard-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" [style.width.%]="(currentStep / totalSteps) * 100"></div>
                                </div>
                                <div class="step-indicator">
                                    <span class="step-number">{{ currentStep }}</span> of {{ totalSteps }}
                                </div>
                            </div>
                        </div>

                        <!-- Preview Mode -->
                        <div *ngIf="isPreviewMode" class="preview-container">
                            <div class="preview-header">
                                <h2>üìÑ Creative Brief Preview</h2>
                                <div class="preview-actions">
                                    <button class="btn-secondary" (click)="isPreviewMode = false">‚úèÔ∏è Edit</button>
                                    <button class="btn-primary" (click)="exportToPDF()">üìÑ PDF</button>
                                    <button class="btn-primary" (click)="exportToPresentation()">üìä Presentation</button>
                                    <button class="btn-primary" (click)="exportToText()">üìã Text</button>
                                </div>
                            </div>
                            <div class="brief-preview" [innerHTML]="generatedBrief"></div>
                            <div class="preview-footer">
                                <button class="btn-secondary" (click)="resetWizard()">üîÑ New Brief</button>
                            </div>
                        </div>

                        <!-- Wizard Steps -->
                        <div *ngIf="!isPreviewMode" class="wizard-content">
                            <!-- Step 1: Business & Brand Info -->
                            <div *ngIf="isCurrentStep(1)" class="wizard-step">
                                <h2>üè¢ Business and Brand Information</h2>
                                <p class="step-description">Tell us about your company and brand to personalize recommendations</p>

                 

                                <div class="form-group">
                                    <label class="form-label">Industry *</label>
                                    <div class="ai-suggestion">
                                        ü§ñ {{ getAIRecommendation('industry-tech') }}
                                    </div>
                                    <select class="form-input" [(ngModel)]="briefData.industry">
                                        <option value="">Select an industry</option>
                                        <option *ngFor="let industry of industryOptions" [value]="industry">{{ industry }}</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Brand personality *</label>
                                    <div class="ai-suggestion">
                                        ü§ñ {{ getAIRecommendation('personality-friendly') }}
                                    </div>
                                    <div class="multi-select-grid">
                                        <div *ngFor="let personality of brandPersonalityOptions" 
                                             class="option-card"
                                             [class.selected]="isSelected(briefData.brandPersonality, personality.value)"
                                             [class.ai-recommended]="personality.aiRecommended"
                                             (click)="toggleSelection(briefData.brandPersonality, personality.value)">
                                            <span class="option-label">{{ personality.label }}</span>
                                            <span *ngIf="personality.aiRecommended" class="ai-badge">AI ‚ú®</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Key product/service differentiators</label>
                                    <textarea class="form-input" rows="3" [(ngModel)]="briefData.keyDifferentiators"
                                              placeholder="What makes your product unique? E.g.: AI automation, intuitive interface, 24/7 support..."></textarea>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Are there existing brand guidelines?</label>
                                    <textarea class="form-input" rows="2" [(ngModel)]="briefData.brandGuidelines"
                                              placeholder="Describe existing tone, colors, visual style guidelines..."></textarea>
                                </div>
                            </div>

                            <!-- Step 2: Target Audience -->
                            <div *ngIf="isCurrentStep(2)" class="wizard-step">
                                <h2>üë• Target Audience</h2>
                                <p class="step-description">Define your audience to create more effective messages</p>

                                <div class="form-group">
                                    <label class="form-label">Primary audience *</label>
                                    <div class="ai-suggestion">
                                        ü§ñ Include demographics, psychographics, behaviors, and pain points
                                    </div>
                                    <textarea class="form-input" rows="4" [(ngModel)]="briefData.primaryAudience"
                                              placeholder="E.g.: Healthcare professionals aged 28-45, efficiency-oriented, seeking to automate processes to focus more on patients..."></textarea>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Secondary audience</label>
                                    <textarea class="form-input" rows="3" [(ngModel)]="briefData.secondaryAudience"
                                              placeholder="Additional audiences that may be interested..."></textarea>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">How does your audience currently perceive the brand/product?</label>
                                    <textarea class="form-input" rows="3" [(ngModel)]="briefData.currentPerception"
                                              placeholder="Recent insights, current perception, improvement opportunities..."></textarea>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Cultural or regional considerations</label>
                                    <input type="text" class="form-input" [(ngModel)]="briefData.culturalConsiderations"
                                           placeholder="Languages, cultures, specific regions...">
                                </div>
                            </div>

                            <!-- Step 3: Campaign Objective -->
                            <div *ngIf="isCurrentStep(3)" class="wizard-step">
                                <h2>üéØ Campaign Objective</h2>
                                <p class="step-description">Define what you want to achieve with this campaign</p>

                                <div class="form-group">
                                    <label class="form-label">Main objective *</label>
                                    <div class="ai-suggestion">
                                        ü§ñ {{ getAIRecommendation('objective-launch') }}
                                    </div>
                                    <div class="radio-grid">
                                        <div *ngFor="let objective of campaignObjectiveOptions" 
                                             class="option-card"
                                             [class.selected]="briefData.campaignObjective === objective.value"
                                             [class.ai-recommended]="objective.aiRecommended"
                                             (click)="briefData.campaignObjective = objective.value">
                                            <span class="option-label">{{ objective.label }}</span>
                                            <span *ngIf="objective.aiRecommended" class="ai-badge">AI ‚ú®</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Specific SMART goals *</label>
                                    <div class="ai-suggestion">
                                        ü§ñ Specific, Measurable, Achievable, Relevant, Time-bound
                                    </div>
                                    <textarea class="form-input" rows="3" [(ngModel)]="briefData.smartGoals"
                                              placeholder="E.g.: Increase awareness by 25% in 3 months, generate 500 qualified leads, increase conversions by 15%..."></textarea>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Business problem or opportunity</label>
                                    <textarea class="form-input" rows="3" [(ngModel)]="briefData.businessProblem"
                                              placeholder="What problem does this campaign solve? What opportunity does it leverage?"></textarea>
                                </div>
                            </div>

                            <!-- Step 4: Messages & CTA -->
                            <div *ngIf="isCurrentStep(4)" class="wizard-step">
                                <h2>üí¨ Messages and Call to Action</h2>
                                <p class="step-description">Define the key messages you want to communicate</p>

                                <div class="form-group">
                                    <label class="form-label">Main message *</label>
                                    <div class="ai-suggestion">
                                        ü§ñ Should be clear, specific, and focused on user benefit
                                    </div>
                                    <textarea class="form-input" rows="3" [(ngModel)]="briefData.primaryMessage"
                                              placeholder="E.g.: 'TechFlow gives you 5 hours back each week so you can focus on what really matters: your patients'"></textarea>
                                </div>

                                <div class="form-group">
                            <div class="form-group">
                                <label class="form-label">Mensajes secundarios</label>
                                <textarea class="form-input" rows="3" [(ngModel)]="briefData.secondaryMessages"
                                          placeholder="Mensajes de apoyo, beneficios adicionales, proof points..."></textarea>
                            </div>

                            <div class="form-group">
                                <label class="form-label">Call to Action principal *</label>
                                <input type="text" class="form-input" [(ngModel)]="briefData.callToAction"
                                       placeholder="Ej: 'Prueba gratis por 30 d√≠as', 'Agenda una demo', 'Descarga ahora'">
                            </div>

                            <div class="form-group">
                                <label class="form-label">Alineaci√≥n con estrategia general</label>
                                <textarea class="form-input" rows="2" [(ngModel)]="briefData.strategyAlignment"
                                          placeholder="¬øC√≥mo se conecta esta campa√±a con la estrategia general de marketing?"></textarea>
                            </div>
                        </div>
                    </div>

                        <!-- Step 5: Channels & Formats -->
                        <div *ngIf="isCurrentStep(5)" class="wizard-step">
                            <h2>üì± Canales y Formatos</h2>
                            <p class="step-description">Selecciona los canales y tipos de contenido m√°s efectivos</p>

                            <div class="form-group">
                                <label class="form-label">Tipos de contenido necesarios *</label>
                                <div class="ai-suggestion">
                                    ü§ñ {{ getAIRecommendation('content-video') }}
                                </div>
                                <div class="multi-select-grid">
                                    <div *ngFor="let content of contentTypeOptions" 
                                         class="option-card"
                                         [class.selected]="isSelected(briefData.contentTypes, content.value)"
                                         [class.ai-recommended]="content.aiRecommended"
                                         (click)="toggleSelection(briefData.contentTypes, content.value)">
                                        <span class="option-label">{{ content.label }}</span>
                                        <span *ngIf="content.aiRecommended" class="ai-badge">AI ‚ú®</span>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="form-label">Canales de distribuci√≥n *</label>
                                <div class="ai-suggestion">
                                    ü§ñ {{ getAIRecommendation('channel-social') }}
                                </div>
                                <div class="multi-select-grid">
                                    <div *ngFor="let channel of channelOptions" 
                                         class="option-card"
                                         [class.selected]="isSelected(briefData.channels, channel.value)"
                                         [class.ai-recommended]="channel.aiRecommended"
                                         (click)="toggleSelection(briefData.channels, channel.value)">
                                        <span class="option-label">{{ channel.label }}</span>
                                        <span *ngIf="channel.aiRecommended" class="ai-badge">AI ‚ú®</span>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="form-label">Rendimiento hist√≥rico de canales</label>
                                <textarea class="form-input" rows="3" [(ngModel)]="briefData.channelPerformance"
                                          placeholder="¬øQu√© canales han funcionado bien/mal anteriormente? Insights espec√≠ficos..."></textarea>
                            </div>

                            <div class="form-group">
                                <label class="form-label">Alcance geogr√°fico</label>
                                <input type="text" class="form-input" [(ngModel)]="briefData.geographicReach"
                                       placeholder="Local, Nacional, Internacional, ciudades espec√≠ficas...">
                            </div>
                        </div>

                        <!-- Step 6: Timeline -->
                        <div *ngIf="isCurrentStep(6)" class="wizard-step">
                            <h2>üìÖ Fechas y Tiempos</h2>
                            <p class="step-description">Define el cronograma de tu campa√±a</p>

                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Fecha de inicio *</label>
                                    <input type="date" class="form-input" [(ngModel)]="briefData.startDate">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Fecha de fin *</label>
                                    <input type="date" class="form-input" [(ngModel)]="briefData.endDate">
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="form-label">Fechas clave y eventos relevantes</label>
                                <div class="ai-suggestion">
                                    ü§ñ Considera lanzamientos, ferias, festividades, estacionalidades
                                </div>
                                <textarea class="form-input" rows="3" [(ngModel)]="briefData.keyDates"
                                          placeholder="Ej: Lanzamiento del producto (15 marzo), Feria de la industria (20-22 abril), Black Friday (29 nov)..."></textarea>
                            </div>

                            <div class="form-group">
                                <label class="form-label">Fechas internas importantes</label>
                                <textarea class="form-input" rows="3" [(ngModel)]="briefData.internalDeadlines"
                                          placeholder="Desarrollo creativo, aprobaciones, compra de medios, deadlines internos..."></textarea>
                            </div>
                        </div>

                        <!-- Step 7: Measurement & KPIs -->
                        <div *ngIf="isCurrentStep(7)" class="wizard-step">
                            <h2>üìä Medici√≥n y KPIs</h2>
                            <p class="step-description">Define c√≥mo vas a medir el √©xito</p>

                            <div class="form-group">
                                <label class="form-label">¬øC√≥mo se medir√° el √©xito? *</label>
                                <textarea class="form-input" rows="3" [(ngModel)]="briefData.successMetrics"
                                          placeholder="Describe los criterios principales de √©xito, m√©todos de medici√≥n..."></textarea>
                            </div>

                            <div class="form-group">
                                <label class="form-label">KPIs clave *</label>
                                <div class="ai-suggestion">
                                    ü§ñ Selecciona m√©tricas alineadas con tus objetivos de negocio
                                </div>
                                <div class="multi-select-grid">
                                    <div *ngFor="let kpi of kpiOptions" 
                                         class="option-card"
                                         [class.selected]="isSelected(briefData.kpis, kpi.value)"
                                         [class.ai-recommended]="kpi.aiRecommended"
                                         (click)="toggleSelection(briefData.kpis, kpi.value)">
                                        <span class="option-label">{{ kpi.label }}</span>
                                        <span *ngIf="kpi.aiRecommended" class="ai-badge">AI ‚ú®</span>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="form-label">Requerimientos de reporte</label>
                                <input type="text" class="form-input" [(ngModel)]="briefData.reportingRequirements"
                                       placeholder="Frecuencia: semanal, mensual, etc. Stakeholders, formato...">
                            </div>

                            <div class="form-group">
                                <label class="form-label">ROI estimado</label>
                                <input type="text" class="form-input" [(ngModel)]="briefData.estimatedROI"
                                       placeholder="Ej: 300% ROI en 6 meses, $50 por cada $1 invertido...">
                            </div>
                        </div>

                        <!-- Step 8: Budget & Final Considerations -->
                        <div *ngIf="isCurrentStep(8)" class="wizard-step">
                            <h2>üí∞ Presupuesto y Consideraciones Finales</h2>
                            <p class="step-description">√öltimos detalles para completar tu brief</p>

                            <div class="form-group">
                                <label class="form-label">Presupuesto total asignado *</label>
                                <div class="budget-input">
                                    <span class="currency">$</span>
                                    <input type="number" class="form-input" [(ngModel)]="briefData.budget"
                                           placeholder="50000">
                                    <select class="currency-select">
                                        <option>USD</option>
                                        <option>MXN</option>
                                        <option>EUR</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="form-label">Desglose de presupuesto</label>
                                <div class="ai-suggestion">
                                    ü§ñ Recomendaci√≥n: 40% medios pagados, 30% contenido, 20% creativos, 10% herramientas
                                </div>
                                <textarea class="form-input" rows="3" [(ngModel)]="briefData.budgetBreakdown"
                                          placeholder="Ej: $20k medios pagados, $15k producci√≥n de contenido, $10k desarrollo creativo, $5k herramientas..."></textarea>
                            </div>

                            <div class="form-group">
                                <label class="form-label">Requisitos legales o de cumplimiento</label>
                                <textarea class="form-input" rows="3" [(ngModel)]="briefData.legalRequirements"
                                          placeholder="Regulaciones espec√≠ficas, disclaimers, aprobaciones necesarias..."></textarea>
                            </div>

                            <div class="form-group">
                                <label class="form-label">Notas adicionales</label>
                                <textarea class="form-input" rows="3" [(ngModel)]="briefData.additionalNotes"
                                          placeholder="Cualquier informaci√≥n adicional relevante..."></textarea>
                            </div>

                            <div class="completion-summary">
                                <h3>‚úÖ Resumen de Completado</h3>
                                <div class="summary-grid">
                                    <div class="summary-item">
                                        <span class="summary-label">Empresa:</span>
                                        <span class="summary-value">{{ briefData.companyName || 'No especificado' }}</span>
                                    </div>
                                    <div class="summary-item">
                                        <span class="summary-label">Industria:</span>
                                        <span class="summary-value">{{ briefData.industry || 'No especificado' }}</span>
                                    </div>
                                    <div class="summary-item">
                                        <span class="summary-label">Objetivo:</span>
                                        <span class="summary-value">{{ briefData.campaignObjective || 'No especificado' }}</span>
                                    </div>
                                    <div class="summary-item">
                                        <span class="summary-label">Presupuesto:</span>
                                        <span class="summary-value">${{ briefData.budget || '0' }}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Navigation Buttons -->
                        <div class="wizard-navigation">
                            <button *ngIf="currentStep > 1" class="btn-secondary" (click)="prevStep()">
                                ‚Üê Anterior
                            </button>
                            <div class="nav-spacer"></div>
                            <button class="btn-primary" 
                                    [disabled]="!isStepValid()"
                                    (click)="nextStep()">
                                {{ currentStep === totalSteps ? 'Finalizar' : 'Siguiente ‚Üí' }}
                            </button>
                        </div>

                </div>
            </div>
        </div>

        <!-- Tooltip -->
        <div class="tooltip" id="tooltip"></div>

        <!-- Ask AI Floating Button -->
        <button class="btn-ask-ai" (click)="toggleChat()">
            ü§ñ Ask AI
        </button>

        <!-- AI Chat Modal -->
        <div class="ai-chat-modal" [class.active]="chatModalActive" id="aiChatModal">
            <div class="ai-chat-container">
                <div class="ai-chat-header">
                    <div class="ai-chat-title">
                        ü§ñ AI Assistant
                    </div>
                    <button class="ai-chat-close" (click)="toggleChat()">&times;</button>
                </div>

                <div class="ai-chat-messages" id="aiChatMessages">
                    <div 
                        *ngFor="let message of chatMessages" 
                        class="chat-message"
                        [class.user]="message.sender === 'user'"
                        [class.ai]="message.sender === 'ai'">
                        <div class="chat-avatar" [class.ai]="message.sender === 'ai'" [class.user]="message.sender === 'user'">
                            {{ message.sender === 'ai' ? 'ü§ñ' : 'MR' }}
                        </div>
                        <div class="message-content">
                            <div [innerHTML]="message.text"></div>
                            <div class="message-time">{{ message.time }}</div>
                        </div>
                    </div>
                </div>

                <div class="ai-chat-input-container">
                    <div class="ai-chat-input-wrapper">
                        <textarea 
                            class="ai-chat-input" 
                            [(ngModel)]="chatInputText"
                            (keydown)="onChatInputKeydown($event)"
                            placeholder="Ask me anything about the project..."></textarea>
                        <button class="ai-chat-send" (click)="sendMessageToAI()">
                            <span>‚úâÔ∏è</span> Send
                        </button>
                    </div>

                    <div class="suggested-questions" id="suggestedQuestions">
                        <div 
                            *ngFor="let question of suggestedQuestions" 
                            class="suggested-question"
                            (click)="selectSuggestedQuestion(question)">
                            {{ question }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>